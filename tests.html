<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="icon" href="img/pizap.png">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ITests - Тесты</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="img/pizap.png" style="width: 30px; height: 30px;" class="d-inline-block align-top" alt=""
                    loading="lazy">
                ITests - Тесты
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item cursor"><a class="nav-link" data-bs-toggle="modal"
                            data-bs-target="#appraisals">Оценки</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="dopOptions" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Доп. возможности
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="dopOptions">
                            <li><a class="nav-link" onclick="plus_fs()">Увеличить размер текста</a></li>
                            <li><a class="nav-link" onclick="minus_fs()">Уменьшить размер текста</a></li>
                            <li><a class="nav-link" onclick="location.reload()">Сбросить размер текста</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="d-flex">
                    <button class="btn btn-outline-danger" id="back" onclick="location.href='index.html'">Назад</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="modal fade" id="appraisals">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" id="appraisals-content">
                <div class="modal-header">
                    <h5 class="modal-title">Оценки</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="row">#</th>
                                <th scope="col">Предмет</th>
                                <th scope="col">Имя</td>
                                <th scope="col">Дата</th>
                                <th scope="col">Результат</th>
                            </tr>
                        </thead>
                        <tbody id="results-tests"></tbody>
                    </table>

                    <button class="btn btn-outline-primary" data-bs-toggle="collapse" data-bs-target=".graphs-appraisals">График оценок</button>
                    <button class="btn btn-outline-primary" data-bs-toggle="collapse" data-bs-target=".average-score-appraisals">Средний балл</button>

                    <div class="collapse graphs-appraisals">
                        <select class="form-select" onchange="createGraphs(this.value)" id="select-subject-graphs">
                            <option selected>Выберите предмет</option>
                        </select>
                        <canvas id="graphs"></canvas>
                    </div>
                    <div class="collapse average-score-appraisals">
                        <select class="form-select" onchange="averageScore(this.value)" id="select-subject-average">
                            <option selected>Выберите предмет</option>
                        </select>

                        <h6 class="text-appraisals d-inline">Оценки</h6>
                        <h6 class="text-average d-inline">Средний балл</h6>

                        <div class="result-average">
                            <div class="all-appraisals d-inline"></div>
                            <div class="average-score d-inline"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid mt-2">
        <div id="tests-inner"></div>
    </div>

    <script src="https://kit.fontawesome.com/373834e38f.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
    </script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-firestore.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/tests.js"></script>
    <script src="js/dopOptions.js"></script>
    <script src="js/studentAppraisal.js"></script>
    <script>
        let teacher_id;
        let test_subject;
        let test_theme;
        let test_questions;
        let test_id;
        let test_result;

        let resultsStudent = [];

        function call_test(id, question_number_e, answer) {
            let question_number = parseInt(question_number_e);
            let date = new Date().toLocaleDateString();

            firebase.database().ref(`school${user.school}/tests/${user.klass}/test${id}`).on('value', (snapshot) => {
                test_subject = snapshot.val().subject;
                test_theme = snapshot.val().theme;
                test_questions = snapshot.val().questions;
                test_id = snapshot.val().idTest;
                test_result = snapshot.val().questions[question_number].correct_answer;

                let isCorrect = "";

                let option1_e = document.getElementById(`option1${question_number}${id}`);
                let option2_e = document.getElementById(`option2${question_number}${id}`);
                let option3_e = document.getElementById(`option3${question_number}${id}`);
                let option4_e = document.getElementById(`option4${question_number}${id}`);
                let button_check_answer = document.getElementById(`check-answer${question_number}${id}`);

                if (option1_e != undefined) {
                    if (option1_e.checked === false && option2_e.checked === false && option3_e.checked ===
                        false && option4_e.checked === false) {
                        Swal.fire({
                            title: "Выберите вариант ответа!",
                            icon: "error"
                        });
                    } else {
                        button_check_answer.disabled = true;

                        if (option1_e.checked) {
                            if (test_result === 1) {
                                let timerInterval;
                                Swal.fire({
                                    title: 'Правильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'success',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Правильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });

                                answerStudent = answer;
                            } else if (test_result === 2) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 3) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 4) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            }
                        } else if (option2_e.checked) {
                            if (test_result === 1) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 2) {
                                Swal.fire({
                                    title: 'Правильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'success',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Правильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 3) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 4) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            }
                        } else if (option3_e.checked) {
                            if (test_result === 1) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 2) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 3) {
                                Swal.fire({
                                    title: 'Правильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'success',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Правильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 4) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            }
                        } else if (option4_e.checked) {
                            if (test_result === 1) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 2) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 3) {
                                Swal.fire({
                                    title: 'Неправильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'error',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Неправильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            } else if (test_result === 4) {
                                Swal.fire({
                                    title: 'Правильно!',
                                    text: 'Не забудьте отправить результат по окончанию теста!',
                                    icon: 'success',
                                    timer: 2500,
                                    timerProgressBar: true,
                                    willOpen: () => {
                                        Swal.showLoading()
                                        timerInterval = setInterval(() => {
                                            const content = Swal.getContent()
                                            if (content) {
                                                const b = content.querySelector('b')
                                                if (b) {
                                                    b.textContent = Swal.getTimerLeft()
                                                }
                                            }
                                        }, 100)
                                    },

                                    willClose: () => {
                                        clearInterval(timerInterval)
                                    }
                                });

                                isCorrect = "Правильно";
                                resultsStudent.push({
                                    result: isCorrect
                                });
                            }
                        }
                    }

                    results_test.push({
                        name: user.fullName,
                        test_subject: test_subject,
                        test_theme: test_theme,
                        test_questions: test_questions,
                        id: test_id,
                        result: isCorrect,
                        klass: user.klass,
                        date: date,
                    });
                } else {
                    button_check_answer.disabled = true;

                    if (answer.trim().toLowerCase() == document.querySelector(
                            `#input-answer${question_number}${id}`).value.trim().toLowerCase()) {
                        Swal.fire({
                            title: 'Правильно!',
                            text: 'Не забудьте отправить результат по окончанию теста!',
                            icon: 'success',
                            timer: 2500,
                            timerProgressBar: true,
                            willOpen: () => {
                                Swal.showLoading()
                                timerInterval = setInterval(() => {
                                    const content = Swal.getContent()
                                    if (content) {
                                        const b = content.querySelector('b')
                                        if (b) {
                                            b.textContent = Swal.getTimerLeft()
                                        }
                                    }
                                }, 100)
                            },

                            willClose: () => {
                                clearInterval(timerInterval)
                            }
                        });

                        isCorrect = "Правильно";
                        resultsStudent.push({
                            result: isCorrect
                        });
                    }
                }
            });
        }

        function send_test(idTest, questions_db_length) {
            if (resultsStudent.length == 0) {
                Swal.fire({
                    title: 'Осторожно!',
                    text: 'Вы не решили ни одного задания. Точно хотите отправить тест учителю?',
                    icon: 'warning',
                    showCancelButton: true
                }).then((result) => {
                    if (result.isConfirmed) {
                        let idResult = getRandId();

                        Swal.fire({
                            title: 'Результат отправлен!',
                            text: `Ваша оценка: 2`,
                            icon: 'danger',
                            timer: 2500,
                            timerProgressBar: true,
                            willOpen: () => {
                                Swal.showLoading()
                                timerInterval = setInterval(() => {
                                    const content = Swal.getContent()
                                    if (content) {
                                        const b = content.querySelector('b')
                                        if (b) {
                                            b.textContent = Swal.getTimerLeft()
                                        }
                                    }
                                }, 100)
                            },

                            willClose: () => {
                                clearInterval(timerInterval)
                            }
                        });

                        firebase.database().ref(
                            `school${user.school}/tests/${user.klass}/test${idTest}/results/result${idResult}/`
                        ).set({
                            result: results_test,
                            appraisal: 2,
                            idTest: idTest,
                            fullName: user.fullName
                        });

                        let btnSendTest = document.getElementById(`send-test${idTest}`);
                        btnSendTest.disabled = true;
                    }
                })
            } else {
                let idResult = getRandId();
                let appraisal;
                let percent_result;
                let questionsLength;
                let results_students_mas_right = [];
                let results_students_mas_wrong = [];

                for (let i = 0; i < resultsStudent.length; i++) {
                    if (resultsStudent[i].result === "Правильно") {
                        results_students_mas_right.push({
                            result: 'Правильно',
                            id: i
                        });
                    } else {
                        results_students_mas_wrong.push({
                            result: 'Неправильно',
                            id: i
                        });
                    }
                }

                for (let i = 0; i < resultsStudent.length; i++) {
                    try {
                        if (results_students_mas_right[i].id === i) {
                            // Формула вычисления процента от числа
                            percent_result = Math.round((results_students_mas_right.length / questions_db_length) *
                                100);

                            if (percent_result >= 90) {
                                appraisal = 5;
                            } else if (percent_result >= 70) {
                                appraisal = 4;
                            } else if (percent_result >= 50) {
                                appraisal = 3;
                            } else {
                                appraisal = 2;
                            }
                        }
                    } catch {}

                    try {
                        if (results_students_mas_wrong[i].id === i) {
                            // Всего ответов
                            questionsLength = results_students_mas_right.length + results_students_mas_wrong.length;

                            // Формула вычисления процента от числа
                            percent_result = Math.round((results_students_mas_right.length / questions_db_length) *
                                100);

                            if (percent_result >= 90) {
                                appraisal = 5;
                            } else if (percent_result >= 70) {
                                appraisal = 4;
                            } else if (percent_result >= 50) {
                                appraisal = 3;
                            } else if (percent_result < 50) {
                                appraisal = 2;
                            }
                        }
                    } catch {}
                }

                Swal.fire({
                    title: 'Результат отправлен!',
                    text: `Ваша оценка: ${appraisal}`,
                    icon: 'success',
                    timer: 2500,
                    timerProgressBar: true,
                    willOpen: () => {
                        Swal.showLoading()
                        timerInterval = setInterval(() => {
                            const content = Swal.getContent()
                            if (content) {
                                const b = content.querySelector('b')
                                if (b) {
                                    b.textContent = Swal.getTimerLeft()
                                }
                            }
                        }, 100)
                    },

                    willClose: () => {
                        clearInterval(timerInterval)
                    }
                });

                firebase.database().ref(
                    `school${user.school}/tests/${user.klass}/test${idTest}/results/result${idResult}/`).set({
                    result: results_test,
                    appraisal: appraisal,
                    idTest: idTest,
                    fullName: user.fullName
                });

                let btnSendTest = document.getElementById(`send-test${idTest}`);
                btnSendTest.disabled = true;
            }
        }
    </script>
</body>

</html>
